import{u as _,f,p as a,q as w,g as k,l as T,s as j,c as r,o as n,a as t,e as i,k as c,I as h,z as A}from"./index-Bi5mqW00.js";const B={class:"min-h-screen bg-gray-50"},L={key:0,class:"flex items-center justify-center min-h-screen"},V={key:1,class:"flex items-center justify-center min-h-screen p-4"},$={class:"bg-white border-l-4 border-red-500 p-4 rounded-lg max-w-sm shadow-sm"},E={class:"flex items-center"},I={key:2,class:"px-6 py-8 max-w-2xl mx-auto"},M={class:"flex items-center justify-between mb-8"},N={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-100"},C={__name:"Transactions",setup(R){const e=w(),v=j(),l=T(),x=_(),d=f(!0),u=f(!1),g=a(()=>e.getters["transactions/allTransactions"]),p=a(()=>e.getters["transactions/isLoading"]),y=a(()=>e.getters["transactions/error"]),o=a(()=>e.getters["auth/currentMembership"]),b=async()=>{if(o.value?._id)try{await e.dispatch("transactions/fetchTransactions",o.value._id)}catch{u.value=!0,x("Failed to load transactions","error")}};return k(async()=>{try{if(!e.getters.isAuthenticated||!o.value){l.replace(`/members/${v.params.code}`);return}await b()}finally{d.value=!1}}),(m,s)=>(n(),r("div",B,[d.value?(n(),r("div",L,[...s[1]||(s[1]=[t("div",{class:"text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto"}),t("p",{class:"mt-4 text-gray-500 animate-pulse"},"Loading transactions...")],-1)])])):u.value?(n(),r("div",V,[t("div",$,[t("div",E,[i(c(h),{icon:"mdi:alert",class:"h-5 w-5 text-red-500 flex-shrink-0"}),s[2]||(s[2]=t("p",{class:"ml-3 text-sm text-gray-700"},"Unable to load transactions.",-1))])])])):(n(),r("div",I,[t("div",M,[s[3]||(s[3]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Transaction History"),t("p",{class:"text-gray-600"},"View all your points activity")],-1)),t("button",{onClick:s[0]||(s[0]=q=>c(l).back()),class:"text-gray-600 hover:text-gray-900 transition-colors"},[i(c(h),{icon:"mdi:arrow-left",class:"h-6 w-6"})])]),t("div",N,[i(A,{transactions:g.value,loading:p.value,error:y.value,"show-view-all":!1,limit:0},null,8,["transactions","loading","error"])])]))]))}};export{C as default};
