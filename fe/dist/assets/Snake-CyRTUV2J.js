import{f as n,p as q,g as K,M as O,c as w,o as z,a as c,e as b,k,I as M,n as W,t as j,i as D,d as B}from"./index-DW8W1nU3.js";const H={class:"snake-game"},J={class:"game-container"},Q=["width","height"],Z={class:"controls"},$={class:"score-display"},ee={class:"button-container"},ae={__name:"Snake",props:{gridSize:{type:Number,default:20},cellSize:{type:Number,default:20},speed:{type:Number,default:150}},setup(P){const a=P,s=n(null),X=n(null),l=q(()=>a.gridSize*a.cellSize),i=n([{x:10,y:10}]),r=n({x:0,y:-1}),u=n({x:Math.floor(Math.random()*a.gridSize),y:Math.floor(Math.random()*a.gridSize)}),g=n(0),x=n(!1),y=n(!1),S=n(!1);let v={x:0,y:-1},p=null;function Y(){x.value=!0,setTimeout(()=>{x.value=!1},300)}const f={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};let _=0,A=0;K(()=>{X.value=s.value.getContext("2d"),window.addEventListener("keydown",T),s.value.addEventListener("touchstart",L),s.value.addEventListener("touchend",E)}),O(()=>{window.removeEventListener("keydown",T),s.value.removeEventListener("touchstart",L),s.value.removeEventListener("touchend",E),p&&cancelAnimationFrame(p)});function T(e){const t=f[e.key];t&&(t.x!==-v.x||t.y!==-v.y)&&(r.value=t)}function L(e){const t=e.touches[0];_=t.clientX,A=t.clientY}function E(e){if(!e.changedTouches[0])return;const t=e.changedTouches[0],m=t.clientX-_,h=t.clientY-A;let o;Math.abs(m)>Math.abs(h)?o=m>0?f.ArrowRight:f.ArrowLeft:o=h>0?f.ArrowDown:f.ArrowUp,o&&(o.x!==-v.x||o.y!==-v.y)&&(r.value=o)}function C(){y.value=!0,S.value=!1,N()}function G(){i.value=[{x:10,y:10}],r.value={x:0,y:-1},u.value={x:Math.floor(Math.random()*a.gridSize),y:Math.floor(Math.random()*a.gridSize)},g.value=0,C()}function N(){y.value&&setTimeout(()=>{p=requestAnimationFrame(N),V(),I()},a.speed)}function V(){v={...r.value};const e={x:i.value[0].x+r.value.x,y:i.value[0].y+r.value.y};if(e.x<0||e.x>=a.gridSize||e.y<0||e.y>=a.gridSize||i.value.some(t=>t.x===e.x&&t.y===e.y)){y.value=!1,S.value=!0;return}i.value.unshift(e),e.x===u.value.x&&e.y===u.value.y?(g.value++,Y(),u.value={x:Math.floor(Math.random()*a.gridSize),y:Math.floor(Math.random()*a.gridSize)}):i.value.pop()}function I(){const e=s.value.getContext("2d");e.clearRect(0,0,l.value,l.value),e.fillStyle="#f8f9fa",e.fillRect(0,0,l.value,l.value),e.strokeStyle="#e9ecef",e.lineWidth=.5;for(let o=0;o<=a.gridSize;o++){const d=o*a.cellSize;e.beginPath(),e.moveTo(d,0),e.lineTo(d,l.value),e.stroke(),e.beginPath(),e.moveTo(0,d),e.lineTo(l.value,d),e.stroke()}i.value.forEach((o,d)=>{const U=o.x*a.cellSize,F=o.y*a.cellSize,R=a.cellSize-2;e.fillStyle=d===0?"#2ecc71":"#27ae60",e.beginPath(),e.roundRect(U+1,F+1,R,R,4),e.fill()});const t=u.value.x*a.cellSize,m=u.value.y*a.cellSize,h=a.cellSize-4;e.shadowColor="#e74c3c",e.shadowBlur=10,e.fillStyle="#e74c3c",e.beginPath(),e.roundRect(t+2,m+2,h,h,6),e.fill(),e.shadowBlur=0}return(e,t)=>(z(),w("div",H,[t[2]||(t[2]=c("h2",{class:"game-title"},"Snake Game",-1)),c("div",J,[c("canvas",{ref_key:"canvas",ref:s,width:l.value,height:l.value},null,8,Q),c("div",Z,[c("div",$,[b(k(M),{icon:"mdi:star",class:"score-icon"}),c("span",{class:W(["score",{"score-changed":x.value}])},j(g.value),3)]),c("div",ee,[y.value?D("",!0):(z(),w("button",{key:0,class:"btn btn-primary game-btn",onClick:C},[b(k(M),{icon:"mdi:play",class:"btn-icon"}),t[0]||(t[0]=B(" Start Game ",-1))])),S.value?(z(),w("button",{key:1,class:"btn btn-secondary game-btn",onClick:G},[b(k(M),{icon:"mdi:refresh",class:"btn-icon"}),t[1]||(t[1]=B(" Play Again ",-1))])):D("",!0)])])])]))}};export{ae as default};
